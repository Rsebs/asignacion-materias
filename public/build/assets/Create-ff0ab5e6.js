import{d as s,i as B,o as n,c as G,w as V,a as t,j as M,b as o,k as N,l as P,e as u,h as g,F as C,g as A,t as m}from"./app-1388f3ab.js";import{g as c}from"./functions-d178657d.js";import{_ as L}from"./AppLayout-b836c665.js";import{_ as d}from"./InputLabel-9b2c81da.js";import{_ as r}from"./TextInput-c855fb06.js";import{_ as R}from"./PrimaryButton-15a980c2.js";import{L as j}from"./Loading-8a3b9f5e.js";import"./ApplicationMark-8dba2d05.js";import"./_plugin-vue_export-helper-c27b6911.js";const F=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Página de Estudiantes CREAR ",-1),O={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"bg-white p-5 overflow-hidden shadow-xl sm:rounded-lg"},H=["onSubmit"],J=t("h1",{class:"text-red-700 text-3xl my-5 uppercase font-bold text-center"},"Matricular estudiante",-1),K=["textContent","value"],Q={class:"table-auto border-collapse border border-slate-400 mt-2 w-full"},W=t("thead",null,[t("tr",null,[t("th",{class:"border border-slate-300"},"Curso"),t("th",{class:"border border-slate-300"},"Créditos"),t("th",{class:"border border-slate-300"},"Profesor")])],-1),X={key:0},Y={colspan:"3"},Z=["textContent"],ee=["textContent"],te={class:"border border-slate-300 grid grid-cols-3"},le={class:"flex justify-between items-center border-b-2 border-r-2 p-1"},oe=["for","textContent"],se=["id","name","onClick"],_e={__name:"Create",setup(ae){const k=s({}),S=s({}),v=s(""),f=s(""),p=s(""),_=s(""),b=s(""),x=s(""),h=s(""),w=s(""),y=s([]),U=s(0),E=s(!0);B(async()=>{await T(),await q(),E.value=!1});async function T(){const a=await c(route("cities.index"),"GET");k.value=a.data}async function q(){const a=await c(route("courses.index"),"GET");S.value=a.data}function D(a,l,e){y.value.includes(a)||(y.value.push(a),U.value+=l)}async function $(){if(U.value>=7){const a={document:v.value,names:f.value,last_names:p.value,phone:_.value,email:b.value,home_address:x.value,city_id:parseInt(h.value),semester:w.value},e={student_id:(await c(route("students.store"),"POST",a)).data.data.id,course_ids:y.value};await c(route("coursesStudents.store"),"POST",e),alert("Registro Guardado"),setTimeout(()=>{window.location.href=route("student.index")},2e3);return}alert("Debes tener como mínimo 7 créditos")}return(a,l)=>(n(),G(L,{title:"Estudiantes"},{header:V(()=>[F]),default:V(()=>[t("div",O,[t("div",I,[t("div",z,[t("form",{onSubmit:M($,["prevent"]),action:"#"},[J,t("div",null,[o(d,{for:"document",value:"Documento"}),o(r,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=e=>v.value=e),id:"document",type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"])]),t("div",null,[o(d,{for:"names",value:"Nombres"}),o(r,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=e=>f.value=e),id:"names",type:"text",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"])]),t("div",null,[o(d,{for:"last_names",value:"Apellidos"}),o(r,{modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=e=>p.value=e),id:"last_names",type:"text",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"])]),t("div",null,[o(d,{for:"phone",value:"Télefono"}),o(r,{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=e=>_.value=e),id:"phone",type:"tel",class:"mt-1 block w-full",autocomplete:"username"},null,8,["modelValue"])]),t("div",null,[o(d,{for:"email",value:"Email"}),o(r,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),id:"email",type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"])]),t("div",null,[o(d,{for:"home_address",value:"Dirección"}),o(r,{modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value=e),id:"home_address",type:"text",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"])]),t("div",null,[o(d,{for:"city",value:"Ciudad"}),N(t("select",{"onUpdate:modelValue":l[6]||(l[6]=e=>h.value=e),id:"city",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full"},[(n(!0),u(C,null,g(k.value,e=>(n(),u("option",{textContent:m(e.name),value:e.id},null,8,K))),256))],512),[[P,h.value]])]),t("div",null,[o(d,{for:"semester",value:"Semestre"}),o(r,{modelValue:w.value,"onUpdate:modelValue":l[7]||(l[7]=e=>w.value=e),id:"semester",type:"number",min:"1",max:"9",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"])]),t("div",null,[t("table",Q,[W,t("tbody",null,[E.value?(n(),u("tr",X,[t("td",Y,[o(j)])])):(n(!0),u(C,{key:1},g(S.value,e=>(n(),u("tr",null,[t("td",{textContent:m(e.name),class:"border border-slate-300 p-1 text-center"},null,8,Z),t("td",{textContent:m(e.credits),class:"border border-slate-300 p-1 text-center"},null,8,ee),t("td",te,[(n(!0),u(C,null,g(e.professors,i=>(n(),u("div",le,[t("label",{for:e.id+"-"+i.id,textContent:m(i.names+" "+i.last_names)},null,8,oe),t("input",{type:"radio",id:e.id+"-"+i.id,name:e.id,onClick:ne=>D(e.id,e.credits,i.id)},null,8,se)]))),256))])]))),256))])])]),o(R,{class:"mt-4"},{default:V(()=>[A(" Guardar ")]),_:1})],40,H)])])])]),_:1}))}};export{_e as default};
